!function(a,b,c,d){"use strict";function f(b){var c=[];return c.push('<div class="hortree-branch">'),a(b).each(function(){c.push(g(this))}),c.push("</div>"),c.join("\n")}function g(a){e++;var b=[];return b.push('<div class="hortree-entry" data-entry-id="'+e+'">'),b.push('<div class="hortree-label">'+a.description+"</div>"),a.children.length&&b.push(f(a.children)),b.push("</div>"),b.join("\n")}function h(){var b=[];a(".hortree-entry").each(function(){var c=a(this).attr("data-entry-id");b.push({entryId:parseInt(c),entry:a(this)})});var c=b.slice(0);c.sort(function(a,b){return a.entryId-b.entryId}),c.reverse();for(var d=0;d<c.length;d++){var e=c[d].entry,f=e.children(".hortree-branch");if(f.length){var g=0;f.each(function(){g+=a(this).height()}),e.height(g)}}}function i(b){function c(a){for(var b=0,c=0;null!=a;b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent);return{x:b,y:c}}a(".hortree-wrapper").each(function(){var d=a(this),e=0,f=0;d.find(".hortree-label").each(function(){if(0==f){var g=a(this).offset().top;e=g*-1+20}if(a(this).siblings(".hortree-branch").length){var h=c(a(this).get(0));a(this).siblings(".hortree-branch").children(".hortree-entry").children(".hortree-label").each(function(){var f=c(a(this).get(0));d.line(h.x+a(this).width()-10,h.y+e,f.x,f.y+e,{zindex:b.lineZindex,color:b.lineColor,stroke:b.lineStrokeWidth})})}f++})})}function j(){a(".hortree-label").each(function(){var b=a(this).height();a(this).parent(".hortree-entry").height(b)})}var e=0;a.fn.hortree=function(b){b=b||{};var c={lineStrokeWidth:2,lineZindex:8,lineColor:"#4b86b7",data:[],onComplete:function(){}},d=a.extend(c,b);if(!a.fn.line)throw new Error("You must load jquery.line.js library! Get it here: https://github.com/tbem/jquery.line");if(!d.data)throw new Error("No data specified!");if(!(d.data instanceof Array))throw new Error("Data should be an array");d.data.length||console.warn("Data is empty");var e=[];e.push('<div class="hortree-wrapper">'),e.push(f(d.data)),e.push("</div>"),this.html(e.join("\n")),j(),h(),i(d),d.onComplete&&"function"==typeof d.onComplete&&d.onComplete.apply()}}(jQuery,window,document);