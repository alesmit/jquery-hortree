!function(e,t,r,n){"use strict";function i(t){var r=[];return r.push('<div class="hortree-branch">'),e(t).each(function(){r.push(o(this))}),r.push("</div>"),r.join("\n")}function o(e){l++;var t=[];return t.push('<div class="hortree-entry" data-entry-id="'+l+'">'),e.tooltip&&""!==e.tooltip.toString().trim()?(t.push('<div class="hortree-label hortree-tooltip">'),t.push('<span class="hortree-tooltip-text">'+e.tooltip+"</span>"),t.push(e.description),t.push("</div>")):t.push('<div class="hortree-label">'+e.description+"</div>"),e.children.length&&t.push(i(e.children)),t.push("</div>"),t.join("\n")}function h(){var t=[];e(".hortree-entry").each(function(){var r=e(this).attr("data-entry-id");t.push({entryId:parseInt(r),entry:e(this)})});var r=t.slice(0);r.sort(function(e,t){return e.entryId-t.entryId}),r.reverse();for(var n=0;n<r.length;n++){var i=r[n].entry,o=i.children(".hortree-branch");if(o.length){var h=0;o.each(function(){h+=e(this).height()}),i.height(h)}}}function a(t){function r(t){for(var r=0,n=0;null!==t&&(r+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent,!e(".hortree-wrapper").is(t)););return{x:r,y:n}}e(".hortree-wrapper").each(function(){var n=e(this),i=0,o=0;n.find(".hortree-label").each(function(){if(0===o){var h=e(this).offset().top;i=-1*h+20}if(e(this).siblings(".hortree-branch").length){var a=r(e(this).get(0));e(this).siblings(".hortree-branch").children(".hortree-entry").children(".hortree-label").each(function(){var o=r(e(this).get(0));n.line(a.x+e(this).width()-10,a.y+i,o.x,o.y+i,{zindex:t.lineZindex,color:t.lineColor,stroke:t.lineStrokeWidth})})}o++})})}function s(){e(".hortree-label").each(function(){var t=e(this).height();e(this).parent(".hortree-entry").height(t)})}var l=0;e.fn.hortree=function(t){t=t||{};var r={lineStrokeWidth:2,lineZindex:8,lineColor:"#4b86b7",data:[],onComplete:function(){}},n=e.extend(r,t);if(!e.fn.line)throw new Error("You must load jquery.line.js library! Get it here: https://github.com/tbem/jquery.line");if(!n.data)throw new Error("No data specified!");if(!(n.data instanceof Array))throw new Error("Data should be an array");n.data.length||console.warn("Data is empty");var o=[];o.push('<div class="hortree-wrapper">'),o.push(i(n.data)),o.push("</div>"),this.html(o.join("\n")),s(),h(),a(n),n.onComplete&&"function"==typeof n.onComplete&&n.onComplete.apply()}}(jQuery,window,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5ob3J0cmVlLmpzIl0sIm5hbWVzIjpbIiQiLCJ3aW5kb3ciLCJkb2N1bWVudCIsInVuZGVmaW5lZCIsImJyYW5jaCIsImxpc3QiLCJodG1sIiwicHVzaCIsImVhY2giLCJicmFuY2hMaXN0IiwidGhpcyIsImpvaW4iLCJlbGVtIiwiZW50cnlJZEluZGV4IiwidG9vbHRpcCIsInRvU3RyaW5nIiwidHJpbSIsImRlc2NyaXB0aW9uIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJhc3NpZ25CcmFuY2hIZWlnaHQiLCJ1bnNvcnRlZEVudHJpZXMiLCJlbnRyeUlkIiwiYXR0ciIsInBhcnNlSW50IiwiZW50cnkiLCJlbnRyaWVzIiwic2xpY2UiLCJzb3J0IiwiYSIsImIiLCJyZXZlcnNlIiwiaSIsImgiLCJoZWlnaHQiLCJkcmF3TGluZXMiLCJvcHRpb25zIiwiZ2V0UG9zIiwiZWwiLCJseCIsImx5Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9mZnNldFBhcmVudCIsImlzIiwieCIsInkiLCJ0cmVlIiwib2Zmc2V0WSIsImVsZW1lbnRJbmRleCIsImZpbmQiLCJvZmZzZXQiLCJ0b3AiLCJzaWJsaW5ncyIsInBhcmVudFBvcyIsImdldCIsImNoaWxkUG9zIiwibGluZSIsIndpZHRoIiwiemluZGV4IiwibGluZVppbmRleCIsImNvbG9yIiwibGluZUNvbG9yIiwic3Ryb2tlIiwibGluZVN0cm9rZVdpZHRoIiwiYXNzaWduRW50cnlIZWlnaHQiLCJwYXJlbnQiLCJmbiIsImhvcnRyZWUiLCJvcHRzIiwiZGVmYXVsdHMiLCJkYXRhIiwib25Db21wbGV0ZSIsImV4dGVuZCIsIkVycm9yIiwiQXJyYXkiLCJjb25zb2xlIiwid2FybiIsImFwcGx5IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FRQyxTQUFXQSxFQUFHQyxFQUFRQyxFQUFVQyxHQUU3QixZQUlBLFNBQVNDLEdBQU9DLEdBQ1osR0FBSUMsS0FNSixPQUxBQSxHQUFLQyxLQUFLLGdDQUNWUCxFQUFFSyxHQUFNRyxLQUFLLFdBQ1RGLEVBQUtDLEtBQUtFLEVBQVdDLFNBRXpCSixFQUFLQyxLQUFLLFVBQ0hELEVBQUtLLEtBQUssTUFHckIsUUFBU0YsR0FBV0csR0FDaEJDLEdBQ0EsSUFBSVAsS0FzQkosT0FyQkFBLEdBQUtDLEtBQUssNkNBQStDTSxFQUFlLE1BRXBFRCxFQUFLRSxTQUE4QyxLQUFuQ0YsRUFBS0UsUUFBUUMsV0FBV0MsUUFFeENWLEVBQUtDLEtBQUssK0NBQ1ZELEVBQUtDLEtBQUssc0NBQXdDSyxFQUFLRSxRQUFVLFdBQ2pFUixFQUFLQyxLQUFLSyxFQUFLSyxhQUNmWCxFQUFLQyxLQUFLLFdBSVZELEVBQUtDLEtBQUssOEJBQWdDSyxFQUFLSyxZQUFjLFVBSTdETCxFQUFLTSxTQUFTQyxRQUNkYixFQUFLQyxLQUFLSCxFQUFPUSxFQUFLTSxXQUcxQlosRUFBS0MsS0FBSyxVQUVIRCxFQUFLSyxLQUFLLE1BT3JCLFFBQVNTLEtBR0wsR0FBSUMsS0FDSnJCLEdBQUUsa0JBQWtCUSxLQUFLLFdBQ3JCLEdBQUljLEdBQVV0QixFQUFFVSxNQUFNYSxLQUFLLGdCQUMzQkYsR0FBZ0JkLE1BQ1plLFFBQVNFLFNBQVNGLEdBQ2xCRyxNQUFPekIsRUFBRVUsU0FLakIsSUFBSWdCLEdBQVVMLEVBQWdCTSxNQUFNLEVBQ3BDRCxHQUFRRSxLQUFLLFNBQVVDLEVBQUdDLEdBQ3RCLE1BQU9ELEdBQUVQLFFBQVVRLEVBQUVSLFVBSXpCSSxFQUFRSyxTQUdSLEtBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJTixFQUFRUCxPQUFRYSxJQUFLLENBQ3JDLEdBQUlQLEdBQVFDLEVBQVFNLEdBQUdQLE1BQ25CUCxFQUFXTyxFQUFNUCxTQUFTLGtCQUc5QixJQUFNQSxFQUFTQyxPQUFRLENBR25CLEdBQUljLEdBQUksQ0FDUmYsR0FBU1YsS0FBSyxXQUNWeUIsR0FBS2pDLEVBQUVVLE1BQU13QixXQUlqQlQsRUFBTVMsT0FBT0QsS0FXekIsUUFBU0UsR0FBVUMsR0FHZixRQUFTQyxHQUFPQyxHQUlaLElBSEEsR0FBSUMsR0FBSyxFQUNMQyxFQUFLLEVBRUssT0FBUEYsSUFDSEMsR0FBTUQsRUFBR0csV0FDVEQsR0FBTUYsRUFBR0ksVUFDVEosRUFBS0EsRUFBR0ssY0FFSjNDLEVBQUUsb0JBQW9CNEMsR0FBR04sTUFLakMsT0FBUU8sRUFBR04sRUFBSU8sRUFBR04sR0FJdEJ4QyxFQUFFLG9CQUFvQlEsS0FBSyxXQUN2QixHQUFJdUMsR0FBTy9DLEVBQUVVLE1BRVRzQyxFQUFVLEVBQ1ZDLEVBQWUsQ0FHbkJGLEdBQUtHLEtBQUssa0JBQWtCMUMsS0FBSyxXQUc3QixHQUFxQixJQUFqQnlDLEVBQW9CLENBQ3BCLEdBQUlQLEdBQVkxQyxFQUFFVSxNQUFNeUMsU0FBU0MsR0FDakNKLElBQXdCLEVBQWJOLEVBQWtCLEdBSWpDLEdBQU0xQyxFQUFFVSxNQUFNMkMsU0FBUyxtQkFBbUJsQyxPQUFRLENBRzlDLEdBQUltQyxHQUFZakIsRUFBT3JDLEVBQUVVLE1BQU02QyxJQUFJLEdBR25DdkQsR0FBRVUsTUFBTTJDLFNBQVMsbUJBQ1puQyxTQUFTLGtCQUNUQSxTQUFTLGtCQUNUVixLQUFLLFdBRUYsR0FBSWdELEdBQVduQixFQUFPckMsRUFBRVUsTUFBTTZDLElBQUksR0FHbENSLEdBQUtVLEtBQ0RILEVBQVVULEVBQUk3QyxFQUFFVSxNQUFNZ0QsUUFBVSxHQUNoQ0osRUFBVVIsRUFBSUUsRUFDZFEsRUFBU1gsRUFDVFcsRUFBU1YsRUFBSUUsR0FFVFcsT0FBUXZCLEVBQVF3QixXQUNoQkMsTUFBT3pCLEVBQVEwQixVQUNmQyxPQUFRM0IsRUFBUTRCLG9CQU9wQ2YsUUFVWixRQUFTZ0IsS0FDTGpFLEVBQUUsa0JBQWtCUSxLQUFLLFdBQ3JCLEdBQUl5QixHQUFJakMsRUFBRVUsTUFBTXdCLFFBQ2hCbEMsR0FBRVUsTUFBTXdELE9BQU8sa0JBQWtCaEMsT0FBT0QsS0F6S2hELEdBQUlwQixHQUFlLENBaUxuQmIsR0FBRW1FLEdBQUdDLFFBQVUsU0FBVUMsR0FDckJBLEVBQU9BLEtBR1AsSUFBSUMsSUFDQU4sZ0JBQWlCLEVBQ2pCSixXQUFZLEVBQ1pFLFVBQVcsVUFDWFMsUUFDQUMsV0FBWSxjQUtacEMsRUFBVXBDLEVBQUV5RSxPQUFPSCxFQUFVRCxFQUVqQyxLQUFLckUsRUFBRW1FLEdBQUdWLEtBQ04sS0FBTSxJQUFJaUIsT0FBTSx5RkFFZixLQUFLdEMsRUFBUW1DLEtBQ2QsS0FBTSxJQUFJRyxPQUFNLHFCQUVmLE1BQU10QyxFQUFRbUMsZUFBZ0JJLFFBQy9CLEtBQU0sSUFBSUQsT0FBTSwwQkFFVnRDLEdBQVFtQyxLQUFLcEQsUUFDbkJ5RCxRQUFRQyxLQUFLLGdCQUdqQixJQUFJdkUsS0FDSkEsR0FBS0MsS0FBSyxpQ0FDVkQsRUFBS0MsS0FBS0gsRUFBT2dDLEVBQVFtQyxPQUN6QmpFLEVBQUtDLEtBQUssVUFFVkcsS0FBS0osS0FBS0EsRUFBS0ssS0FBSyxPQUVwQnNELElBQ0E3QyxJQUNBZSxFQUFVQyxHQUdKQSxFQUFRb0MsWUFBNEMsa0JBQXZCcEMsR0FBUW9DLFlBQ3ZDcEMsRUFBUW9DLFdBQVdNLFVBSzVCQyxPQUFROUUsT0FBUUMiLCJmaWxlIjoianF1ZXJ5LmhvcnRyZWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiAganF1ZXJ5LWhvcnRyZWUgLSB2MS4wLjFcclxuICogIFJlbmRlciBhbiBob3Jpem9udGFsIGhpZXJhcmNoaWNhbCB0cmVlIGZyb20gYSBKU09OIHNjaGVtYS5cclxuICogIGh0dHBzOi8vZ2l0aHViLmNvbS9hbGVzbWl0L2pxdWVyeS1ob3J0cmVlXHJcbiAqXHJcbiAqICBNYWRlIGJ5IEFsZXNzYW5kcm8gTWl0ZWxsaVxyXG4gKiAgVW5kZXIgTUlUIExpY2Vuc2VcclxuICovXHJcbjsoZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBlbnRyeUlkSW5kZXggPSAwO1xyXG5cclxuICAgIGZ1bmN0aW9uIGJyYW5jaChsaXN0KSB7XHJcbiAgICAgICAgdmFyIGh0bWwgPSBbXTtcclxuICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJob3J0cmVlLWJyYW5jaFwiPicpO1xyXG4gICAgICAgICQobGlzdCkuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGh0bWwucHVzaChicmFuY2hMaXN0KHRoaXMpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBodG1sLnB1c2goJzwvZGl2PicpO1xyXG4gICAgICAgIHJldHVybiBodG1sLmpvaW4oXCJcXG5cIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYnJhbmNoTGlzdChlbGVtKSB7XHJcbiAgICAgICAgZW50cnlJZEluZGV4Kys7XHJcbiAgICAgICAgdmFyIGh0bWwgPSBbXTtcclxuICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJob3J0cmVlLWVudHJ5XCIgZGF0YS1lbnRyeS1pZD1cIicgKyBlbnRyeUlkSW5kZXggKyAnXCI+Jyk7XHJcblxyXG4gICAgICAgIGlmIChlbGVtLnRvb2x0aXAgJiYgZWxlbS50b29sdGlwLnRvU3RyaW5nKCkudHJpbSgpICE9PSAnJykge1xyXG5cclxuICAgICAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwiaG9ydHJlZS1sYWJlbCBob3J0cmVlLXRvb2x0aXBcIj4nKTtcclxuICAgICAgICAgICAgaHRtbC5wdXNoKCc8c3BhbiBjbGFzcz1cImhvcnRyZWUtdG9vbHRpcC10ZXh0XCI+JyArIGVsZW0udG9vbHRpcCArICc8L3NwYW4+Jyk7XHJcbiAgICAgICAgICAgIGh0bWwucHVzaChlbGVtLmRlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgaHRtbC5wdXNoKCc8L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIGh0bWwucHVzaCgnPGRpdiBjbGFzcz1cImhvcnRyZWUtbGFiZWxcIj4nICsgZWxlbS5kZXNjcmlwdGlvbiArICc8L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZWxlbS5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaHRtbC5wdXNoKGJyYW5jaChlbGVtLmNoaWxkcmVuKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBodG1sLnB1c2goJzwvZGl2PicpO1xyXG5cclxuICAgICAgICByZXR1cm4gaHRtbC5qb2luKFwiXFxuXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogcHJldmVudCBlbnRyaWVzIG92ZXJsYXA6XHJcbiAgICAgKiBlYWNoIGJyYW5jaCBoZWlnaHQgc2hvdWxkIGJlIGVxdWFsIHRvIHRoZSB0b3RhbCBoZWlnaHRzIG9mIGl0cyBjaGlsZHJlbiBlbnRyaWVzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFzc2lnbkJyYW5jaEhlaWdodCgpIHtcclxuXHJcbiAgICAgICAgLy8gZ2V0IGVudHJpZXMgdW5zb3J0ZWRcclxuICAgICAgICB2YXIgdW5zb3J0ZWRFbnRyaWVzID0gW107XHJcbiAgICAgICAgJCgnLmhvcnRyZWUtZW50cnknKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5SWQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtZW50cnktaWQnKTtcclxuICAgICAgICAgICAgdW5zb3J0ZWRFbnRyaWVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZW50cnlJZDogcGFyc2VJbnQoZW50cnlJZCksXHJcbiAgICAgICAgICAgICAgICBlbnRyeTogJCh0aGlzKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBzb3J0IGVudHJpZXMgYnkgcmVuZGVyaW5nIG9yZGVyXHJcbiAgICAgICAgdmFyIGVudHJpZXMgPSB1bnNvcnRlZEVudHJpZXMuc2xpY2UoMCk7XHJcbiAgICAgICAgZW50cmllcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmVudHJ5SWQgLSBiLmVudHJ5SWQ7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGdldCBpdCBpbiByZXZlcnNlIG9yZGVyXHJcbiAgICAgICAgZW50cmllcy5yZXZlcnNlKCk7XHJcblxyXG4gICAgICAgIC8vIGl0ZXJhdGUgZWFjaCBlbnRyeVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2ldLmVudHJ5O1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBlbnRyeS5jaGlsZHJlbignLmhvcnRyZWUtYnJhbmNoJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGVudHJ5IGhhcyBhIGJyYW5jaCAoaXQgaGFzIGNoaWxkcmVuIGVudHJpZXMpXHJcbiAgICAgICAgICAgIGlmICghIWNoaWxkcmVuLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHN1bSBlYWNoIGNoaWxkIGVudHJ5IGhlaWdodFxyXG4gICAgICAgICAgICAgICAgdmFyIGggPSAwO1xyXG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaCArPSAkKHRoaXMpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gYW5kIGdpdmUgaXQgdG8gdGhlIHBhcmVudFxyXG4gICAgICAgICAgICAgICAgZW50cnkuaGVpZ2h0KGgpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBkcmF3IGxpbmVzIHNjaGVtYSBiZXR3ZWVuIGVudHJpZXNcclxuICAgICAqIEBwYXJhbSBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGRyYXdMaW5lcyhvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIC8vIGdldCBuYXRpdmUgZWxlbWVudCBwb3NpdGlvblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFBvcyhlbCkge1xyXG4gICAgICAgICAgICB2YXIgbHggPSAwLFxyXG4gICAgICAgICAgICAgICAgbHkgPSAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKGVsICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBseCArPSBlbC5vZmZzZXRMZWZ0O1xyXG4gICAgICAgICAgICAgICAgbHkgKz0gZWwub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICAgICAgZWwgPSBlbC5vZmZzZXRQYXJlbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCQoJy5ob3J0cmVlLXdyYXBwZXInKS5pcyhlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHt4OiBseCwgeTogbHl9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZHJhdyBsaW5lcyBmb3IgZWFjaCBoaWVyYXJjaGljYWwgdHJlZSBpbiB0aGUgcGFnZVxyXG4gICAgICAgICQoJy5ob3J0cmVlLXdyYXBwZXInKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRyZWUgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9mZnNldFkgPSAwOyAvLyBvZmZzZXQgWSBpcyBzZXQgb24gZmlyc3QgZWxlbWVudCBpdGVyYXRpb25cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnRJbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBpdGVyYXRlIG92ZXIgZW50cmllcyBjb250ZW50XHJcbiAgICAgICAgICAgIHRyZWUuZmluZCgnLmhvcnRyZWUtbGFiZWwnKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzZXQgWSBvZmZzZXQgcG9zIHdoZXJlIHRvIHJlbmRlciBlYWNoIGxpbmVcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50SW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0VG9wID0gJCh0aGlzKS5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0WSA9IChvZmZzZXRUb3AgKiAtMSkgKyAyMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBpdCBoYXMgY2hpbGRyZW4gdGhlbiBkcmF3IGxpbmVcclxuICAgICAgICAgICAgICAgIGlmICghISQodGhpcykuc2libGluZ3MoJy5ob3J0cmVlLWJyYW5jaCcpLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBwYXJlbnQgcG9zaXRpb25cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50UG9zID0gZ2V0UG9zKCQodGhpcykuZ2V0KDApKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHBvc2l0aW9uIG9mIGVhY2ggY2hpbGRcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCcuaG9ydHJlZS1icmFuY2gnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2hpbGRyZW4oJy5ob3J0cmVlLWVudHJ5JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNoaWxkcmVuKCcuaG9ydHJlZS1sYWJlbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRQb3MgPSBnZXRQb3MoJCh0aGlzKS5nZXQoMCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRyYXcgbGluZSBiZXR3ZWVuIHR3byBwb2ludHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUubGluZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQb3MueCArICQodGhpcykud2lkdGgoKSAtIDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFBvcy55ICsgb2Zmc2V0WSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZFBvcy54LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkUG9zLnkgKyBvZmZzZXRZLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemluZGV4OiBvcHRpb25zLmxpbmVaaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBvcHRpb25zLmxpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiBvcHRpb25zLmxpbmVTdHJva2VXaWR0aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudEluZGV4Kys7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHNldCBlYWNoIGVudHJ5IGhlaWdodCBiYXNlZCBvbiBpdHMgbGFiZWwgY29udGVudFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhc3NpZ25FbnRyeUhlaWdodCgpIHtcclxuICAgICAgICAkKCcuaG9ydHJlZS1sYWJlbCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgaCA9ICQodGhpcykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCcuaG9ydHJlZS1lbnRyeScpLmhlaWdodChoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBwbHVnaW5cclxuICAgICAqIEBwYXJhbSBvcHRzXHJcbiAgICAgKi9cclxuICAgICQuZm4uaG9ydHJlZSA9IGZ1bmN0aW9uIChvcHRzKSB7XHJcbiAgICAgICAgb3B0cyA9IG9wdHMgfHwge307XHJcblxyXG4gICAgICAgIC8vIGRlZmF1bHQgb3B0aW9uc1xyXG4gICAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgbGluZVN0cm9rZVdpZHRoOiAyLFxyXG4gICAgICAgICAgICBsaW5lWmluZGV4OiA4LFxyXG4gICAgICAgICAgICBsaW5lQ29sb3I6ICcjNGI4NmI3JyxcclxuICAgICAgICAgICAgZGF0YTogW10sXHJcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIG9uQ29tcGxldGUgY2FsbGJhY2tcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdHMpO1xyXG5cclxuICAgICAgICBpZiAoISQuZm4ubGluZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBsb2FkIGpxdWVyeS5saW5lLmpzIGxpYnJhcnkhIEdldCBpdCBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vdGJlbS9qcXVlcnkubGluZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIW9wdGlvbnMuZGF0YSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBkYXRhIHNwZWNpZmllZCFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCEob3B0aW9ucy5kYXRhIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRhdGEgc2hvdWxkIGJlIGFuIGFycmF5XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghb3B0aW9ucy5kYXRhLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJEYXRhIGlzIGVtcHR5XCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGh0bWwgPSBbXTtcclxuICAgICAgICBodG1sLnB1c2goJzxkaXYgY2xhc3M9XCJob3J0cmVlLXdyYXBwZXJcIj4nKTtcclxuICAgICAgICBodG1sLnB1c2goYnJhbmNoKG9wdGlvbnMuZGF0YSkpO1xyXG4gICAgICAgIGh0bWwucHVzaCgnPC9kaXY+Jyk7XHJcblxyXG4gICAgICAgIHRoaXMuaHRtbChodG1sLmpvaW4oJ1xcbicpKTtcclxuXHJcbiAgICAgICAgYXNzaWduRW50cnlIZWlnaHQoKTtcclxuICAgICAgICBhc3NpZ25CcmFuY2hIZWlnaHQoKTtcclxuICAgICAgICBkcmF3TGluZXMob3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIGV4ZWN1dGUgb25Db21wbGV0ZSBjYWxsYmFja1xyXG4gICAgICAgIGlmICghIW9wdGlvbnMub25Db21wbGV0ZSAmJiB0eXBlb2Ygb3B0aW9ucy5vbkNvbXBsZXRlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMub25Db21wbGV0ZS5hcHBseSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xyXG4iXX0=
